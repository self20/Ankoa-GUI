#:import aspect_ratio app.mod_encode.encode_var.aspect_ratio
#:import deteline app.mod_encode.encode_var.deteline
#:import decomb app.mod_encode.encode_var.decomb
#:import deinterlace app.mod_encode.encode_var.deinterlace
#:import denoise app.mod_encode.encode_var.denoise
#:import ar_sd app.mod_encode.encode_var.ar_sd
#:import ar_720p app.mod_encode.encode_var.ar_720p
#:import ar_1080p app.mod_encode.encode_var.ar_1080p

<picture@Widget>:
    pos_hint: {'center_x': .5, 'center_y': .5}
    size_hint: .96, .96
    cols: 1

    # ---------- SOURCE INFOS ----------
    BoxLayout:
        size_hint: 1, .4
        canvas.before:
            Color:
                rgba: 0, 0, 0, 1
            Rectangle:
                size: self.size
                pos: self.pos
        Label:
            text: 'Source Infos Area'

    # ---------- AUTO RESIZE ----------
    BoxLayout:
        padding: '8sp'
        orientation: 'horizontal'
        size_hint: 1, .1
        canvas:
            Color:
                rgba: .2, .3, .4, .5
            Rectangle:
                size: self.size
                pos: self.pos
        Switch:
            id: auto_resize
            size_hint_x: .20
            touch_control: False
            active:
                True if root.ids.auto_sd.state == 'down' or\
                root.ids.auto_720p.state == 'down' or\
                root.ids.auto_1080p.state == 'down' else False
        Label:
            text: 'Auto Resize'
            bold: True
            size_hint_x: .40
        BoxLayout:
            ToggleButton:
                id: auto_sd
                text: 'Auto SD'
                group: 'auto_resize'
                ar_var: 'ar_sd'
            ToggleButton:
                id: auto_720p
                text: 'Auto 720p'
                group: 'auto_resize'
                ar_var: 'ar_720p'
            ToggleButton:
                id: auto_1080p
                text: 'Auto 1080p'
                group: 'auto_resize'
                ar_var: 'ar_1080p'

    # ---------- SAMPLE ASPECT RATIO ----------
    BoxLayout:
        padding: '8sp'
        orientation: 'horizontal'
        size_hint: 1, .1
        canvas:
            Color:
                rgba: .2, .3, .4, 1
            Rectangle:
                size: self.size
                pos: self.pos
        Switch:
            id: sar
            size_hint_x: .20
            touch_control: False
            active:
                True if root.ids.pal43.state == 'down' or\
                root.ids.pal169.state == 'down' or\
                root.ids.ntsc43.state == 'down' or\
                root.ids.ntsc169.state == 'down' else False
        Label:
            text: 'Auto SAR'
            bold: True
            size_hint_x: .40
        BoxLayout:
            ToggleButton:
                id: pal43
                text: 'PAL 4:3'
                group: 'auto_resize'
            ToggleButton:
                id: pal169
                text: 'PAL 16:9'
                group: 'auto_resize'
            ToggleButton:
                id: ntsc43
                text: 'NTSC 4:3'
                group: 'auto_resize'
            ToggleButton:
                id: ntsc169
                text: 'NTSC 16:9'
                group: 'auto_resize'

    # ---------- RESOLUTION ----------
    BoxLayout:
        padding: '8sp'
        orientation: 'horizontal'
        size_hint: 1, .1
        canvas:
            Color:
                rgba: .2, .3, .4, .5
            Rectangle:
                size: self.size
                pos: self.pos
        Switch:
            id: reso
            size_hint_x: .20
            touch_control: False
            active:
                True if root.ids.sar.active == False and\
                root.ids.video_W.text != '' and\
                root.ids.video_H.text != '' else False
        Label:
            text: 'Resolution'
            bold: True
            size_hint_x: .40
        BoxLayout:
            Slider:
                id: aspect
                min: 0
                max: 5
                step: 1
                value: 3
            Label:
                text:
                    'Custom' if root.ids.sar.active == True else\
                    aspect_ratio[int('{}'.format(aspect.value)
                    .split('.')[0])]
            Label:
                text: 'Width'
            TextInput:
                id: video_W
                multiline: False
                input_filter: 'int'
                text:
                    eval(auto_sd.ar_var)[int('{}'.format(aspect.value)
                    .split('.')[0])].split('x')[0]\
                    if auto_sd.state == 'down' else\
                    eval(auto_720p.ar_var)[int('{}'.format(aspect.value)
                    .split('.')[0])].split('x')[0]\
                    if auto_720p.state == 'down' else\
                    eval(auto_1080p.ar_var)[int('{}'.format(aspect.value)
                    .split('.')[0])].split('x')[0]\
                    if auto_1080p.state == 'down' else ''
            Label:
                text: 'Height'
            TextInput:
                id: video_H
                multiline: False
                input_filter: 'int'
                text:
                    eval(auto_sd.ar_var)[int('{}'.format(aspect.value)
                    .split('.')[0])].split('x')[1]\
                    if auto_sd.state == 'down' else\
                    eval(auto_720p.ar_var)[int('{}'.format(aspect.value)
                    .split('.')[0])].split('x')[1]\
                    if auto_720p.state == 'down' else\
                    eval(auto_1080p.ar_var)[int('{}'.format(aspect.value)
                    .split('.')[0])].split('x')[1]\
                    if auto_1080p.state == 'down' else ''

    # ---------- CUSTOM CROP ----------
    BoxLayout:
        padding: '8sp'
        orientation: 'horizontal'
        size_hint: 1, .1
        canvas:
            Color:
                rgba: .2, .3, .4, 1
            Rectangle:
                size: self.size
                pos: self.pos
        Switch:
            id: custom_crop
            size_hint_x: .20
            touch_control: False
            active:
                True if root.ids.crop_W.text != '' and\
                root.ids.crop_H.text != '' and\
                root.ids.crop_T.text != '' and\
                root.ids.crop_B.text != '' and\
                root.ids.crop_R.text != '' and\
                root.ids.crop_L.text != '' else False
        Label:
            text: 'Custom Crop'
            bold: True
            size_hint_x: .40
        BoxLayout:
            TextInput:
                id: crop_W
                hint_text: 'Width'
                multiline: False
                input_filter: 'int'
            TextInput:
                id: crop_H
                hint_text: 'Height'
                multiline: False
                input_filter: 'int'
            Label:
            TextInput:
                id: crop_T
                hint_text: 'Top'
                multiline: False
                input_filter: 'int'
            TextInput:
                id: crop_B
                hint_text: 'Bottom'
                multiline: False
                input_filter: 'int'
            TextInput:
                id: crop_R
                hint_text: 'Right'
                multiline: False
                input_filter: 'int'
            TextInput:
                id: crop_L
                hint_text: 'Left'
                multiline: False
                input_filter: 'int'

    # ---------- DETELINE ----------
    BoxLayout:
        padding: '8sp'
        orientation: 'horizontal'
        size_hint: 1, .1
        canvas:
            Color:
                rgba: .2, .3, .4, .5
            Rectangle:
                size: self.size
                pos: self.pos
        Switch:
            id: deteline_on
            size_hint_x: .20
            touch_control: False
            active:
                True if root.ids.dtline.value != 0 else False
        Label:
            text: 'Deteline Filter'
            bold: True
            size_hint_x: .40
        BoxLayout:
            Slider:
                id: dtline
                min: 0
                max: 2
                step: 1
                value: 0
            Label:
                text:
                    deteline[int('{}'.format(dtline.value)
                    .split('.')[0])]
                bold: True
            TextInput:

    # ---------- DECOMB ----------
    BoxLayout:
        padding: '8sp'
        orientation: 'horizontal'
        size_hint: 1, .1
        canvas:
            Color:
                rgba: .2, .3, .4, 1
            Rectangle:
                size: self.size
                pos: self.pos
        Switch:
            size_hint_x: .20
            touch_control: False
            active:
                True if root.ids.dcomb.value != 0 else False
        Label:
            text: 'Decomb Filter'
            bold: True
            size_hint_x: .40
        BoxLayout:
            Slider:
                id: dcomb
                min: 0
                max: 4
                step: 1
                value: 0
            Label:
                text:
                    decomb[int('{}'.format(dcomb.value)
                    .split('.')[0])]
                bold: True
            TextInput:

    # ---------- DEINTERLACE ----------
    BoxLayout:
        padding: '8sp'
        orientation: 'horizontal'
        size_hint: 1, .1
        canvas:
            Color:
                rgba: .2, .3, .4, .5
            Rectangle:
                size: self.size
                pos: self.pos
        Switch:
            size_hint_x: .20
            touch_control: False
            active:
                True if root.ids.dint.value != 0 else False
        Label:
            text: 'Deinterlace Filter'
            bold: True
            size_hint_x: .40
        BoxLayout:
            Slider:
                id: dint
                min: 0
                max: 5
                step: 1
                value: 0
            Label:
                text:
                    deinterlace[int('{}'.format(dint.value)
                    .split('.')[0])]
                bold: True
            TextInput:

    # ---------- DENOISE ----------
    BoxLayout:
        padding: '8sp'
        orientation: 'horizontal'
        size_hint: 1, .1
        canvas:
            Color:
                rgba: .2, .3, .4, 1
            Rectangle:
                size: self.size
                pos: self.pos
        Switch:
            size_hint_x: .20
            touch_control: False
            active:
                True if root.ids.dnoise.value != 0 else False
        Label:
            text: 'Denoise Filter'
            bold: True
            size_hint_x: .40
        BoxLayout:
            Slider:
                id: dnoise
                min: 0
                max: 4
                step: 1
                value: 0
            Label:
                text:
                    denoise[int('{}'.format(dnoise.value)
                    .split('.')[0])]
                bold: True
            TextInput:
